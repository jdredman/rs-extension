<!DOCTYPE html>
<html>
<head>
    <title>Test Search Results HTML</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section { 
            background: white; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-title { 
            color: #333; 
            border-bottom: 2px solid #0066cc;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        pre { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 4px; 
            overflow-x: auto;
            border: 1px solid #e9ecef;
        }
        .rendered-html {
            border: 2px solid #28a745;
            padding: 15px;
            border-radius: 4px;
            background: #f8fff9;
        }
    </style>
</head>
<body>
    <h1>Search Results HTML Generation Test</h1>
    
    <div class="test-section">
        <h2 class="test-title">1. Link Card Test</h2>
        <div id="link-card-container" class="rendered-html"></div>
        <h3>Generated HTML:</h3>
        <pre id="link-card-html"></pre>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">2. YouTube Embed Test</h2>
        <div id="youtube-embed-container" class="rendered-html"></div>
        <h3>Generated HTML:</h3>
        <pre id="youtube-embed-html"></pre>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">3. Combined Results Test</h2>
        <div id="combined-container" class="rendered-html"></div>
        <h3>Generated HTML:</h3>
        <pre id="combined-html"></pre>
    </div>
    
    <script>
        // Copy the functions from popup.js
        function createLinkCard(result) {
            const title = result.title || 'Untitled';
            const url = result.url || '#';
            const description = result.description || 'No description available';
            const displayLink = result.displayLink || new URL(url).hostname;
            const favicon = result.favicon || `https://www.google.com/s2/favicons?domain=${displayLink}`;
            
            return `<div class="link-preview"><div class="link-preview-header"><img src="${favicon}" alt="Site icon" class="link-favicon" onerror="this.style.display='none'"><span class="link-domain">${displayLink}</span></div><div class="link-preview-body"><h4 class="link-title"><a href="${url}" target="_blank" rel="noopener noreferrer">${title}</a></h4><p class="link-description">${description}</p></div></div>`;
        }
        
        function createYouTubeEmbed(result) {
            const title = result.title || 'Untitled Video';
            const description = result.description || 'No description available';
            const thumbnail = result.thumbnail || `https://img.youtube.com/vi/${result.videoId}/mqdefault.jpg`;
            const url = result.url || `https://www.youtube.com/watch?v=${result.videoId}`;
            
            return `<div class="youtube-embed" data-video-id="${result.videoId}"><div class="youtube-thumbnail" style="background-image: url('${thumbnail}')"><div class="youtube-play-button"><svg width="68" height="48" viewBox="0 0 68 48"><path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f00"></path><path d="M 45,24 27,14 27,34" fill="#fff"></path></svg></div></div><div class="youtube-info"><h4 class="youtube-title">${title}</h4><p class="youtube-description">${description}</p><a href="${url}" target="_blank" rel="noopener noreferrer" class="youtube-link">Watch on YouTube</a></div></div>`;
        }
        
        function createLinkPreview(result) {
            if (result.type === 'video' && result.videoId) {
                return createYouTubeEmbed(result);
            } else {
                return createLinkCard(result);
            }
        }
        
        // Test data
        const linkResult = {
            title: "EveryDollar - Free Budgeting App",
            url: "https://www.ramseysolutions.com/ramseyplus/everydollar",
            description: "Create a zero-based budget with EveryDollar. Give every dollar a job before you spend it. Free budgeting app that follows Dave Ramsey's proven money plan.",
            displayLink: "ramseysolutions.com",
            favicon: "https://www.google.com/s2/favicons?domain=ramseysolutions.com",
            type: "tool"
        };
        
        const videoResult = {
            title: "How To Start An Emergency Fund",
            url: "https://www.youtube.com/watch?v=abc123",
            description: "Dave Ramsey explains step-by-step how to build your first $1,000 emergency fund.",
            displayLink: "youtube.com",
            favicon: "https://www.google.com/s2/favicons?domain=youtube.com",
            type: "video",
            videoId: "abc123",
            thumbnail: "https://img.youtube.com/vi/abc123/mqdefault.jpg"
        };
        
        // Test 1: Link Card
        const linkHTML = createLinkCard(linkResult);
        document.getElementById('link-card-container').innerHTML = linkHTML;
        document.getElementById('link-card-html').textContent = linkHTML;
        
        // Test 2: YouTube Embed
        const youtubeHTML = createYouTubeEmbed(videoResult);
        document.getElementById('youtube-embed-container').innerHTML = youtubeHTML;
        document.getElementById('youtube-embed-html').textContent = youtubeHTML;
        
        // Test 3: Combined
        const results = [linkResult, videoResult];
        const combinedHTML = results.map(result => createLinkPreview(result)).join('\n');
        document.getElementById('combined-container').innerHTML = combinedHTML;
        document.getElementById('combined-html').textContent = combinedHTML;
        
        console.log('Link HTML:', linkHTML);
        console.log('YouTube HTML:', youtubeHTML);
        console.log('Combined HTML:', combinedHTML);
    </script>
</body>
</html>
