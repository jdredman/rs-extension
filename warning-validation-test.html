<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warning System Validation Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .test-results { background: #f5f5f5; padding: 10px; margin: 10px 0; }
        .pass { color: green; }
        .fail { color: red; }
    </style>
</head>
<body>
    <h1>Warning System Validation Test</h1>
    
    <div class="test-section">
        <h2>Budget Content Test</h2>
        <p>This section contains multiple budget-related keywords:</p>
        <ul>
            <li>Creating a <strong>budget</strong> is essential for financial success</li>
            <li>Monthly <strong>budgeting</strong> helps track expenses</li>
            <li>Financial planning with a proper budget saves money</li>
        </ul>
        <div id="budget-test-results" class="test-results">
            <strong>Expected:</strong> Budget warning should appear
        </div>
    </div>
    
    <div class="test-section">
        <h2>Credit Card Content Test</h2>
        <p>This section discusses credit cards extensively:</p>
        <ul>
            <li>Many people rely on <strong>credit cards</strong> for purchases</li>
            <li>High <strong>credit card debt</strong> can be problematic</li>
            <li>Using a <strong>credit card</strong> responsibly is important</li>
        </ul>
        <div id="credit-card-test-results" class="test-results">
            <strong>Expected:</strong> Credit card warning should appear
        </div>
    </div>
    
    <div class="test-section">
        <h2>Neutral Content Test</h2>
        <p>This section contains no trigger words:</p>
        <ul>
            <li>Weather forecasts for the weekend</li>
            <li>Sports news and entertainment updates</li>
            <li>Travel tips and cooking recipes</li>
        </ul>
        <div id="neutral-test-results" class="test-results">
            <strong>Expected:</strong> No warnings should appear for this content
        </div>
    </div>
    
    <div class="test-section">
        <h2>Test Results</h2>
        <div id="overall-results" class="test-results">
            <p>Testing in progress...</p>
        </div>
    </div>

    <script>
        // Wait for content script to run
        setTimeout(() => {
            const results = [];
            
            // Check for budget warning
            const budgetWarning = document.querySelector('.rs-budget-warning-wrapper');
            if (budgetWarning) {
                results.push('<span class="pass">✓ Budget warning detected and displayed</span>');
                
                // Test budget warning content
                const budgetTitle = budgetWarning.querySelector('.rs-budget-warning-title');
                const budgetIcon = budgetWarning.querySelector('.rs-budget-warning-icon');
                const budgetClose = budgetWarning.querySelector('.rs-budget-warning-close');
                
                if (budgetTitle) results.push('<span class="pass">✓ Budget warning has title</span>');
                else results.push('<span class="fail">✗ Budget warning missing title</span>');
                
                if (budgetIcon) results.push('<span class="pass">✓ Budget warning has icon</span>');
                else results.push('<span class="fail">✗ Budget warning missing icon</span>');
                
                if (budgetClose) results.push('<span class="pass">✓ Budget warning has close button</span>');
                else results.push('<span class="fail">✗ Budget warning missing close button</span>');
                
            } else {
                results.push('<span class="fail">✗ Budget warning not detected</span>');
            }
            
            // Check for credit card warning
            const creditCardWarning = document.querySelector('.rs-credit-card-warning-wrapper');
            if (creditCardWarning) {
                results.push('<span class="pass">✓ Credit card warning detected and displayed</span>');
                
                // Test credit card warning content
                const ccTitle = creditCardWarning.querySelector('.rs-credit-card-warning-title');
                const ccIcon = creditCardWarning.querySelector('.rs-credit-card-warning-icon');
                const ccClose = creditCardWarning.querySelector('.rs-credit-card-warning-close');
                
                if (ccTitle) results.push('<span class="pass">✓ Credit card warning has title</span>');
                else results.push('<span class="fail">✗ Credit card warning missing title</span>');
                
                if (ccIcon) results.push('<span class="pass">✓ Credit card warning has icon</span>');
                else results.push('<span class="fail">✗ Credit card warning missing icon</span>');
                
                if (ccClose) results.push('<span class="pass">✓ Credit card warning has close button</span>');
                else results.push('<span class="fail">✗ Credit card warning missing close button</span>');
                
            } else {
                results.push('<span class="fail">✗ Credit card warning not detected</span>');
            }
            
            // Check positioning and styling
            const allWarnings = document.querySelectorAll('.rs-budget-warning-wrapper, .rs-credit-card-warning-wrapper');
            if (allWarnings.length > 0) {
                results.push(`<span class="pass">✓ ${allWarnings.length} warning(s) positioned correctly</span>`);
                
                // Check if warnings are at the top of the page
                allWarnings.forEach((warning, index) => {
                    const styles = window.getComputedStyle(warning);
                    if (styles.position === 'fixed') {
                        results.push(`<span class="pass">✓ Warning ${index + 1} has fixed positioning</span>`);
                    } else {
                        results.push(`<span class="fail">✗ Warning ${index + 1} positioning incorrect</span>`);
                    }
                });
            }
            
            // Update results display
            document.getElementById('overall-results').innerHTML = results.join('<br>');
            
            // Test dismissal functionality
            setTimeout(() => {
                const closeButtons = document.querySelectorAll('.rs-budget-warning-close, .rs-credit-card-warning-close');
                if (closeButtons.length > 0) {
                    results.push(`<span class="pass">✓ Found ${closeButtons.length} close button(s) for dismissal testing</span>`);
                    document.getElementById('overall-results').innerHTML = results.join('<br>');
                }
            }, 1000);
            
        }, 2000);
    </script>
</body>
</html>
